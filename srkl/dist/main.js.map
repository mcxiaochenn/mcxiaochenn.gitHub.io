{"version":3,"file":"main.js","sources":["webpack://happy-birthday/./script/main.js"],"sourcesContent":["let audioUrl = \"\"\nlet audio = null\nlet isPlaying = false\n\n// Import the data to customize and insert them into page\nconst fetchData = () => {\n  fetch(\"customize.json\")\n    .then(data => data.json())\n    .then(data => {\n      dataArr = Object.keys(data)\n      dataArr.map(customData => {\n        if (data[customData] !== \"\") {\n          if (customData === \"imagePath\") {\n            document\n              .querySelector(`[data-node-name*=\"${customData}\"]`)\n              .setAttribute(\"src\", data[customData])\n          } else if (customData === \"fonts\") {\n            data[customData].forEach(font => {\n              const link = document.createElement('link')\n              link.rel = 'stylesheet'\n              link.href = font.path\n              document.head.appendChild(link)\n              //设置body字体\n              document.body.style.fontFamily = font.name\n            })\n          } else if (customData === \"music\") {\n            audioUrl = data[customData]\n            audio = new Audio(audioUrl)\n            audio.preload = \"auto\"\n          } else {\n            document.querySelector(`[data-node-name*=\"${customData}\"]`).innerText = data[customData]\n          }\n        }\n\n        // Check if the iteration is over\n        // Run amimation if so\n        if (dataArr.length === dataArr.indexOf(customData) + 1) {\n          document.querySelector(\"#startButton\").addEventListener(\"click\", () => {\n            document.querySelector(\".startSign\").style.display = \"none\"\n            animationTimeline()\n          }\n          )\n          // animationTimeline()\n        }\n      })\n    })\n}\n\n// Animation Timeline\nconst animationTimeline = () => {\n  // Spit chars that needs to be animated individually\n  const textBoxChars = document.getElementsByClassName(\"hbd-chatbox\")[0]\n  const hbd = document.getElementsByClassName(\"wish-hbd\")[0]\n\n  textBoxChars.innerHTML = `<span>${textBoxChars.innerHTML\n    .split(\"\")\n    .join(\"</span><span>\")}</span`\n\n  hbd.innerHTML = `<span>${hbd.innerHTML\n    .split(\"\")\n    .join(\"</span><span>\")}</span`\n\n  const ideaTextTrans = {\n    opacity: 0,\n    y: -20,\n    rotationX: 5,\n    skewX: \"15deg\"\n  }\n\n  const ideaTextTransLeave = {\n    opacity: 0,\n    y: 20,\n    rotationY: 5,\n    skewX: \"-15deg\"\n  }\n\n  const tl = new TimelineMax()\n\n  tl\n    .to(\".container\", 0.1, {\n      visibility: \"visible\"\n    })\n    .from(\".one\", 0.7, {\n      opacity: 0,\n      y: 10\n    })\n    .from(\".two\", 0.4, {\n      opacity: 0,\n      y: 10\n    })\n    .to(\n      \".one\",\n      0.7,\n      {\n        opacity: 0,\n        y: 10\n      },\n      \"+=2.5\"\n    )\n    .to(\n      \".two\",\n      0.7,\n      {\n        opacity: 0,\n        y: 10\n      },\n      \"-=1\"\n    )\n    .from(\".three\", 0.7, {\n      opacity: 0,\n      y: 10\n      // scale: 0.7\n    })\n    .to(\n      \".three\",\n      0.7,\n      {\n        opacity: 0,\n        y: 10\n      },\n      \"+=2\"\n    )\n    .from(\".four\", 0.7, {\n      scale: 0.2,\n      opacity: 0\n    })\n    .from(\".fake-btn\", 0.3, {\n      scale: 0.2,\n      opacity: 0\n    })\n    .staggerTo(\n      \".hbd-chatbox span\",\n      0.5,\n      {\n        visibility: \"visible\"\n      },\n      0.05\n    )\n    .to(\".fake-btn\", 0.1, {\n      backgroundColor: \"#8FE3B6\"\n    })\n    .to(\n      \".four\",\n      0.5,\n      {\n        scale: 0.2,\n        opacity: 0,\n        y: -150\n      },\n      \"+=0.7\"\n    )\n    .from(\".idea-1\", 0.7, ideaTextTrans)\n    .to(\".idea-1\", 0.7, ideaTextTransLeave, \"+=1.5\")\n    .from(\".idea-2\", 0.7, ideaTextTrans)\n    .to(\".idea-2\", 0.7, ideaTextTransLeave, \"+=1.5\")\n    .from(\".idea-3\", 0.7, ideaTextTrans)\n    .to(\".idea-3 strong\", 0.5, {\n      scale: 1.2,\n      x: 10,\n      backgroundColor: \"rgb(21, 161, 237)\",\n      color: \"#fff\"\n    })\n    .to(\".idea-3\", 0.7, ideaTextTransLeave, \"+=1.5\")\n    .from(\".idea-4\", 0.7, ideaTextTrans)\n    .to(\".idea-4\", 0.7, ideaTextTransLeave, \"+=1.5\")\n    .from(\n      \".idea-5\",\n      0.7,\n      {\n        rotationX: 15,\n        rotationZ: -10,\n        skewY: \"-5deg\",\n        y: 50,\n        z: 10,\n        opacity: 0\n      },\n      \"+=0.5\"\n    )\n    .to(\n      \".idea-5 .smiley\",\n      0.7,\n      {\n        rotation: 90,\n        x: 8\n      },\n      \"+=0.4\"\n    )\n    .to(\n      \".idea-5\",\n      0.7,\n      {\n        scale: 0.2,\n        opacity: 0\n      },\n      \"+=2\"\n    )\n    .staggerFrom(\n      \".idea-6 span\",\n      0.8,\n      {\n        scale: 3,\n        opacity: 0,\n        rotation: 15,\n        ease: Expo.easeOut\n      },\n      0.2\n    )\n    .staggerTo(\n      \".idea-6 span\",\n      0.8,\n      {\n        scale: 3,\n        opacity: 0,\n        rotation: -15,\n        ease: Expo.easeOut\n      },\n      0.2,\n      \"+=1\"\n    )\n    .staggerFromTo(\n      \".baloons img\",\n      2.5,\n      {\n        opacity: 0.9,\n        y: 1400\n      },\n      {\n        opacity: 1,\n        y: -1000\n      },\n      0.2\n    )\n    .from(\n      \".lydia-dp\",\n      0.5,\n      {\n        scale: 3.5,\n        opacity: 0,\n        x: 25,\n        y: -25,\n        rotationZ: -45\n      },\n      \"-=2\"\n    )\n    .from(\".hat\", 0.5, {\n      x: -100,\n      y: 350,\n      rotation: -180,\n      opacity: 0\n    })\n    .staggerFrom(\n      \".wish-hbd span\",\n      0.7,\n      {\n        opacity: 0,\n        y: -50,\n        // scale: 0.3,\n        rotation: 150,\n        skewX: \"30deg\",\n        ease: Elastic.easeOut.config(1, 0.5)\n      },\n      0.1\n    )\n    .staggerFromTo(\n      \".wish-hbd span\",\n      0.7,\n      {\n        scale: 1.4,\n        rotationY: 150\n      },\n      {\n        scale: 1,\n        rotationY: 0,\n        color: \"#ff69b4\",\n        ease: Expo.easeOut\n      },\n      0.1,\n      \"party\"\n    )\n    .from(\n      \".wish h5\",\n      0.5,\n      {\n        opacity: 0,\n        y: 10,\n        skewX: \"-15deg\"\n      },\n      \"party\"\n    )\n    .staggerTo(\n      \".eight svg\",\n      1.5,\n      {\n        visibility: \"visible\",\n        opacity: 0,\n        scale: 80,\n        repeat: 3,\n        repeatDelay: 1.4\n      },\n      0.3\n    )\n    .to(\".six\", 0.5, {\n      opacity: 0,\n      y: 30,\n      zIndex: \"-1\"\n    })\n    .staggerFrom(\".nine p\", 1, ideaTextTrans, 1.2)\n    .to(\n      \".last-smile\",\n      0.5,\n      {\n        rotation: 90\n      },\n      \"+=1\"\n    )\n\n  // tl.seek(\"currentStep\");\n  // tl.timeScale(2);\n\n  // Restart Animation on click\n  const replyBtn = document.getElementById(\"replay\")\n  replyBtn.addEventListener(\"click\", () => {\n    tl.restart()\n\n  })\n}\n\n// Run fetch and animation in sequence\nfetchData()\n\nconst playPauseButton = document.getElementById('playPauseButton')\n\ndocument.getElementById('startButton').addEventListener('click', () => {\n  if (audio) {\n    togglePlay(true)\n  }\n})\n\nplayPauseButton.addEventListener('click', () => {\n  if (audio) {\n    togglePlay(!isPlaying)\n  }\n})\n\nfunction togglePlay(play) {\n  if (!audio) return\n  \n  isPlaying = play\n  play ? audio.play() : audio.pause()\n  playPauseButton.classList.toggle('playing', play)\n}"],"names":["audioUrl","audio","isPlaying","animationTimeline","textBoxChars","document","getElementsByClassName","hbd","innerHTML","split","join","ideaTextTrans","opacity","y","rotationX","skewX","ideaTextTransLeave","rotationY","tl","TimelineMax","to","visibility","from","scale","staggerTo","backgroundColor","x","color","rotationZ","skewY","z","rotation","staggerFrom","ease","Expo","easeOut","staggerFromTo","Elastic","config","repeat","repeatDelay","zIndex","replyBtn","getElementById","addEventListener","restart","fetch","then","data","json","dataArr","Object","keys","map","customData","querySelector","setAttribute","forEach","font","link","createElement","rel","href","path","head","appendChild","body","style","fontFamily","name","Audio","preload","innerText","length","indexOf","display","playPauseButton","togglePlay","play","pause","classList","toggle"],"mappings":"kCAAA,IAAIA,EAAW,GACXC,EAAQ,KACRC,EAAY,GA+CVC,EAAoB,KAExB,IAAMC,EAAeC,SAASC,sBAAsB,CAAC,cAAc,CAAC,EAAE,CAChEC,EAAMF,SAASC,sBAAsB,CAAC,WAAW,CAAC,EAAE,AAE1DF,CAAAA,EAAaI,SAAS,CAAG,CAAC,MAAM,EAAEJ,EAAaI,SAAS,CACrDC,KAAK,CAAC,IACNC,IAAI,CAAC,iBAAiB,MAAM,CAAC,CAEhCH,EAAIC,SAAS,CAAG,CAAC,MAAM,EAAED,EAAIC,SAAS,CACnCC,KAAK,CAAC,IACNC,IAAI,CAAC,iBAAiB,MAAM,CAAC,CAEhC,IAAMC,EAAgB,CACpBC,QAAS,EACTC,EAAG,IACHC,UAAW,EACXC,MAAO,OACT,EAEMC,EAAqB,CACzBJ,QAAS,EACTC,EAAG,GACHI,UAAW,EACXF,MAAO,QACT,EAEMG,EAAK,IAAIC,YAEfD,EACGE,EAAE,CAAC,aAAc,GAAK,CACrBC,WAAY,SACd,GACCC,IAAI,CAAC,OAAQ,GAAK,CACjBV,QAAS,EACTC,EAAG,EACL,GACCS,IAAI,CAAC,OAAQ,GAAK,CACjBV,QAAS,EACTC,EAAG,EACL,GACCO,EAAE,CACD,OACA,GACA,CACER,QAAS,EACTC,EAAG,EACL,EACA,SAEDO,EAAE,CACD,OACA,GACA,CACER,QAAS,EACTC,EAAG,EACL,EACA,OAEDS,IAAI,CAAC,SAAU,GAAK,CACnBV,QAAS,EACTC,EAAG,EAEL,GACCO,EAAE,CACD,SACA,GACA,CACER,QAAS,EACTC,EAAG,EACL,EACA,OAEDS,IAAI,CAAC,QAAS,GAAK,CAClBC,MAAO,GACPX,QAAS,CACX,GACCU,IAAI,CAAC,YAAa,GAAK,CACtBC,MAAO,GACPX,QAAS,CACX,GACCY,SAAS,CACR,oBACA,GACA,CACEH,WAAY,SACd,EACA,KAEDD,EAAE,CAAC,YAAa,GAAK,CACpBK,gBAAiB,SACnB,GACCL,EAAE,CACD,QACA,GACA,CACEG,MAAO,GACPX,QAAS,EACTC,EAAG,IACL,EACA,SAEDS,IAAI,CAAC,UAAW,GAAKX,GACrBS,EAAE,CAAC,UAAW,GAAKJ,EAAoB,SACvCM,IAAI,CAAC,UAAW,GAAKX,GACrBS,EAAE,CAAC,UAAW,GAAKJ,EAAoB,SACvCM,IAAI,CAAC,UAAW,GAAKX,GACrBS,EAAE,CAAC,iBAAkB,GAAK,CACzBG,MAAO,IACPG,EAAG,GACHD,gBAAiB,oBACjBE,MAAO,MACT,GACCP,EAAE,CAAC,UAAW,GAAKJ,EAAoB,SACvCM,IAAI,CAAC,UAAW,GAAKX,GACrBS,EAAE,CAAC,UAAW,GAAKJ,EAAoB,SACvCM,IAAI,CACH,UACA,GACA,CACER,UAAW,GACXc,UAAW,IACXC,MAAO,QACPhB,EAAG,GACHiB,EAAG,GACHlB,QAAS,CACX,EACA,SAEDQ,EAAE,CACD,kBACA,GACA,CACEW,SAAU,GACVL,EAAG,CACL,EACA,SAEDN,EAAE,CACD,UACA,GACA,CACEG,MAAO,GACPX,QAAS,CACX,EACA,OAEDoB,WAAW,CACV,eACA,GACA,CACET,MAAO,EACPX,QAAS,EACTmB,SAAU,GACVE,KAAMC,KAAKC,OAAO,AACpB,EACA,IAEDX,SAAS,CACR,eACA,GACA,CACED,MAAO,EACPX,QAAS,EACTmB,SAAU,IACVE,KAAMC,KAAKC,OAAO,AACpB,EACA,GACA,OAEDC,aAAa,CACZ,eACA,IACA,CACExB,QAAS,GACTC,EAAG,IACL,EACA,CACED,QAAS,EACTC,EAAG,IACL,EACA,IAEDS,IAAI,CACH,YACA,GACA,CACEC,MAAO,IACPX,QAAS,EACTc,EAAG,GACHb,EAAG,IACHe,UAAW,GACb,EACA,OAEDN,IAAI,CAAC,OAAQ,GAAK,CACjBI,EAAG,KACHb,EAAG,IACHkB,SAAU,KACVnB,QAAS,CACX,GACCoB,WAAW,CACV,iBACA,GACA,CACEpB,QAAS,EACTC,EAAG,IAEHkB,SAAU,IACVhB,MAAO,QACPkB,KAAMI,QAAQF,OAAO,CAACG,MAAM,CAAC,EAAG,GAClC,EACA,IAEDF,aAAa,CACZ,iBACA,GACA,CACEb,MAAO,IACPN,UAAW,GACb,EACA,CACEM,MAAO,EACPN,UAAW,EACXU,MAAO,UACPM,KAAMC,KAAKC,OAAO,AACpB,EACA,GACA,SAEDb,IAAI,CACH,WACA,GACA,CACEV,QAAS,EACTC,EAAG,GACHE,MAAO,QACT,EACA,SAEDS,SAAS,CACR,aACA,IACA,CACEH,WAAY,UACZT,QAAS,EACTW,MAAO,GACPgB,OAAQ,EACRC,YAAa,GACf,EACA,IAEDpB,EAAE,CAAC,OAAQ,GAAK,CACfR,QAAS,EACTC,EAAG,GACH4B,OAAQ,IACV,GACCT,WAAW,CAAC,UAAW,EAAGrB,EAAe,KACzCS,EAAE,CACD,cACA,GACA,CACEW,SAAU,EACZ,EACA,OAQJW,AADiBrC,SAASsC,cAAc,CAAC,UAChCC,gBAAgB,CAAC,QAAS,KACjC1B,EAAG2B,OAAO,EAEZ,EACF,EA/TEC,MAAM,kBACHC,IAAI,CAAC,AAAAC,GAAQA,EAAKC,IAAI,IACtBF,IAAI,CAAC,AAAAC,IAEJE,AADAA,CAAAA,QAAUC,OAAOC,IAAI,CAACJ,EAAI,EAClBK,GAAG,CAAC,AAAAC,IACe,KAArBN,CAAI,CAACM,EAAW,GACdA,AAAe,cAAfA,EACFjD,SACGkD,aAAa,CAAC,CAAC,kBAAkB,EAAED,EAAW,EAAE,CAAC,EACjDE,YAAY,CAAC,MAAOR,CAAI,CAACM,EAAW,EAC9BA,AAAe,UAAfA,EACTN,CAAI,CAACM,EAAW,CAACG,OAAO,CAAC,AAAAC,IACvB,IAAMC,EAAOtD,SAASuD,aAAa,CAAC,OACpCD,CAAAA,EAAKE,GAAG,CAAG,aACXF,EAAKG,IAAI,CAAGJ,EAAKK,IAAI,CACrB1D,SAAS2D,IAAI,CAACC,WAAW,CAACN,GAE1BtD,SAAS6D,IAAI,CAACC,KAAK,CAACC,UAAU,CAAGV,EAAKW,IAAI,AAC5C,GACSf,AAAe,UAAfA,GACTtD,EAAWgD,CAAI,CAACM,EAAW,CAE3BrD,AADAA,CAAAA,EAAQ,IAAIqE,MAAMtE,EAAQ,EACpBuE,OAAO,CAAG,QAEhBlE,SAASkD,aAAa,CAAC,CAAC,kBAAkB,EAAED,EAAW,EAAE,CAAC,EAAEkB,SAAS,CAAGxB,CAAI,CAACM,EAAW,EAMxFJ,QAAQuB,MAAM,GAAKvB,QAAQwB,OAAO,CAACpB,GAAc,GACnDjD,SAASkD,aAAa,CAAC,gBAAgBX,gBAAgB,CAAC,QAAS,KAC/DvC,SAASkD,aAAa,CAAC,cAAcY,KAAK,CAACQ,OAAO,CAAG,OACrDxE,GACF,EAIJ,EACF,GA6RJ,IAAMyE,EAAkBvE,SAASsC,cAAc,CAAC,mBAchD,SAASkC,EAAWC,CAAI,EACjB7E,IAELC,EAAY4E,EACZA,EAAO7E,EAAM6E,IAAI,GAAK7E,EAAM8E,KAAK,GACjCH,EAAgBI,SAAS,CAACC,MAAM,CAAC,UAAWH,GAC9C,CAlBAzE,SAASsC,cAAc,CAAC,eAAeC,gBAAgB,CAAC,QAAS,KAC3D3C,GACF4E,EAAW,GAEf,GAEAD,EAAgBhC,gBAAgB,CAAC,QAAS,KACpC3C,GACF4E,EAAW,CAAC3E,EAEhB,E"}